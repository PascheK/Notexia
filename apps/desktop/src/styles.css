@import "tailwindcss";

@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

/* Variants custom */
@custom-variant dark (&:is(.dark &));
@custom-variant mobile (@media (max-width: 767px));

@theme {
  /* ========== RADIUS ========== */
  --radius: 12px;
  --radius-sm: calc(var(--radius) - 6px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: calc(var(--radius) + 2px);
  --radius-xl: calc(var(--radius) + 6px);

  /* ========== TOKENS APP (DARK FIRST) ========== */
  --color-app-bg: rgb(3, 7, 18);             /* fond très sombre */
  --color-app-surface: rgb(17, 24, 39);      /* surface sombre */
  --color-app-surface-alt:  rgb(31, 41, 55);  /* surface + contrastée */
  --color-app-border:  rgb(55, 65, 81);       /* border */
  --color-app-accent:  rgb(110, 86, 207);     /* accent */
  --color-app-accent-soft:  rgb(110, 86, 207 / 0.12);
  --color-app-fg: rgb(249, 250, 251);        /* texte principal */
  --color-app-fg-muted: rgb(156, 163, 175);  /* texte secondaire */

  /* ========== PALETTE GLOBALE (pour plus tard si besoin) ========== */

  --color-brand-50: rgb(37, 30, 64);
  --color-brand-100: rgb(44, 34, 80);
  --color-brand-200: rgb(50, 39, 95);
  --color-brand-300: rgb(57, 44, 114);
  --color-brand-400: rgb(68, 53, 146);
  --color-brand-500: rgb(88, 66, 195);
  --color-brand-600: rgb(110, 86, 207);
  --color-brand-700: rgb(124, 102, 220);
  --color-brand-800: rgb(158, 140, 252);
  --color-brand-900: rgb(241, 238, 254);

  --color-neutral-0: rgb(3, 7, 18);
  --color-neutral-50: rgb(17, 24, 39);
  --color-neutral-100: rgb(31, 41, 55);
  --color-neutral-200: rgb(55, 65, 81);
  --color-neutral-300: rgb(75, 85, 99);
  --color-neutral-400: rgb(107, 114, 128);
  --color-neutral-500: rgb(156, 163, 175);
  --color-neutral-600: rgb(209, 213, 219);
  --color-neutral-700: rgb(229, 231, 235);
  --color-neutral-800: rgb(243, 244, 246);
  --color-neutral-900: rgb(249, 250, 251);
  --color-neutral-950: rgb(255, 255, 255);

  /* Alias pratiques */
  --color-brand-primary: rgb(110, 86, 207);
  --color-default-font: rgb(249, 250, 251);
  --color-subtext-color: rgb(156, 163, 175);
  --color-neutral-border: rgb(55, 65, 81);
  --color-black: rgb(3, 7, 18);
  --color-default-background: rgb(3, 7, 18);

  /* ========== MAPPING SHADCN / TOKENS GLOBAUX ========== */

  --color-background: var(--color-app-bg);
  --color-foreground: var(--color-app-fg);

  --color-card: var(--color-app-surface);
  --color-card-foreground: var(--color-app-fg);

  --color-popover: var(--color-app-surface);
  --color-popover-foreground: var(--color-app-fg);

  --color-primary: var(--color-app-accent);
  --color-primary-foreground: 3 7 18;

  --color-secondary: 17 24 39;
  --color-secondary-foreground: var(--color-app-fg);

  --color-muted: 27 34 48;
  --color-muted-foreground: var(--color-app-fg-muted);

  --color-accent: var(--color-app-surface-alt);
  --color-accent-foreground: var(--color-app-fg);

  --color-destructive: 248 113 113;
  --color-destructive-foreground: 15 23 42;

  --color-border: var(--color-app-border);
  --color-input: var(--color-app-border);
  --color-ring: var(--color-app-accent);

  /* Sidebar tokens */
  --color-sidebar: var(--color-app-surface-alt);
  --color-sidebar-foreground: var(--color-app-fg);
  --color-sidebar-primary: var(--color-app-accent);
  --color-sidebar-primary-foreground: 3 7 18;
  --color-sidebar-accent: 27 34 48;
  --color-sidebar-accent-foreground: var(--color-app-fg);
  --color-sidebar-border: var(--color-app-border);
  --color-sidebar-ring: var(--color-app-accent);

  /* FONTS */
  --font-sans: Outfit, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    sans-serif;
  --font-mono: monospace;

  /* Shadows */
  --shadow-sm: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);
  --shadow-md: 0px 4px 16px -2px rgba(0, 0, 0, 0.08),
    0px 2px 4px -1px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0px 12px 32px -4px rgba(0, 0, 0, 0.08),
    0px 4px 8px -2px rgba(0, 0, 0, 0.08);

  /* Animations (tailwindcss-animate) */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

/* Container utilitaire */
@utility container {
  padding-left: 16px;
  padding-right: 16px;

  @media (width >= theme(--breakpoint-sm)) {
    padding-left: calc((100vw + 16px - 640px) / 2);
    padding-right: calc((100vw + 16px - 640px) / 2);
  }

  @media (width >= theme(--breakpoint-md)) {
    padding-left: calc((100vw + 16px - 768px) / 2);
    padding-right: calc((100vw + 16px - 768px) / 2);
  }

  @media (width >= theme(--breakpoint-lg)) {
    padding-left: calc((100vw + 16px - 1024px) / 2);
    padding-right: calc((100vw + 16px - 1024px) / 2);
  }

  @media (width >= theme(--breakpoint-xl)) {
    padding-left: calc((100vw + 16px - 1280px) / 2);
    padding-right: calc((100vw + 16px - 1280px) / 2);
  }

  @media (width >= theme(--breakpoint-2xl)) {
    padding-left: calc((100vw + 16px - 1536px) / 2);
    padding-right: calc((100vw + 16px - 1536px) / 2);
  }
}

/* ========== BASE : Fallback 100% dark, même si Tailwind fait n'importe quoi ========== */
@layer base {
  :root {
    color-scheme: dark;
  }

  body {
    margin: 0;
    font-family: var(--font-sans);
    background-color: rgb(var(--color-app-bg));
    color: rgb(var(--color-app-fg));
  }

  * {
    border-color: rgb(var(--color-border));
  }

  .prose {
    @apply prose-invert prose-headings:text-app-fg prose-p:leading-relaxed;
    @apply prose-code:bg-app-surface-alt prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded-md prose-code:text-app-fg;
    @apply prose-blockquote:border-l-2 prose-blockquote:border-app-border prose-blockquote:text-app-fg-muted;
  }
}